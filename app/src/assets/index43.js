import{T as z}from"./table-paginate.js";import{p as O}from"./table-paginate2.js";import{d as P,r as u,o as Y,bK as _,eG as S,an as I,ao as N,ap as l,aw as s,ar as i,ax as p,a7 as T,aC as M,aD as B}from"./index.js";import{_ as R}from"./DatePicker.js";import{_ as E}from"./Form.js";import{N as H}from"./DataTable.js";import{_ as V}from"./_plugin-vue_export-helper.js";import"./TimePicker.js";import"./FocusDetector.js";import"./next-frame-once.js";import"./Input.js";import"./use-merged-state.js";import"./Dropdown.js";import"./use-compitable.js";import"./get.js";import"./format-length.js";import"./Icon.js";import"./ChevronRight.js";import"./Checkbox.js";import"./RadioGroup.js";import"./get-slot.js";const j=m=>(M("data-v-24f401b5"),m=m(),B(),m),q={class:"query-area"},F={class:"grid grid-cols-6 gap-6"},G={class:"flex items-center"},K={class:"flex items-center"},L=j(()=>l("label",{class:"mr-2",style:{width:"4rem"}},"异常日期",-1)),U={class:"flex items-center ml-4"},$={class:"mt-2"},A={class:"mt-4"},J=P({__name:"index",setup(m){const t=u({date:null,page:1,pagesize:10}),n=u({totalItems:0,pageSize:O,currentPage:1}),y=u([{title:"序号",key:"index",render:(e,a)=>a+1},{title:"货柜名称",key:"cabinet.name"},{title:"异常时间",key:"time"},{title:"异常原因",key:"reason"},{title:"错误异常状态码",key:"status"},{title:"异常类型",key:"type"},{title:"异常位置",key:"position"}]),f=u([]),g=e=>{n.value.currentPage=e,c()};Y(()=>{c()});const v=()=>{n.value.currentPage=1,c()},c=async()=>{var e,a;try{const d={...t.value,date:((e=t.value.date)==null?void 0:e.length)===2?t.value.date.map(r=>_(r).format("YYYY-MM-DD")):[],page:n.value.currentPage,pagesize:n.value.pageSize},o=await S(d);o.data&&(f.value=o.data.items.map(r=>({...r,time:_(r.time).format("YYYY-MM-DD HH:mm:ss")})),n.value.totalItems=o.data.total)}catch(d){console.error("数据加载失败:",d),(a=window.$message)==null||a.error("数据加载失败")}},h=()=>{t.value={date:null,page:1,pagesize:10},c()},x=()=>{const e=_().startOf("day");t.value.date=[e.startOf("day").valueOf(),e.endOf("day").valueOf()]},b=()=>{const e=_().subtract(1,"day");t.value.date=[e.startOf("day").valueOf(),e.endOf("day").valueOf()]},k=e=>{const a=new Date().setHours(0,0,0,0);return e>a},w=()=>{c()};return(e,a)=>{const d=R,o=T,r=E,C=H;return I(),N("div",null,[l("div",q,[s(r,{model:t.value,"label-width":100,"label-placement":"left",inline:""},{default:i(()=>[l("div",F,[l("div",G,[l("div",K,[L,s(d,{value:t.value.date,"onUpdate:value":a[0]||(a[0]=D=>t.value.date=D),type:"daterange",placeholder:"请选择日期范围","disabled-date":k,style:{width:"270px"},clearable:""},null,8,["value"])]),l("div",U,[s(o,{type:"primary",style:{"margin-left":"20px"},onClick:x},{default:i(()=>[p("今日")]),_:1}),s(o,{type:"primary",style:{"margin-left":"15px"},onClick:b},{default:i(()=>[p("昨日")]),_:1}),s(o,{type:"primary",style:{"margin-left":"20px"},onClick:v},{default:i(()=>[p("查询")]),_:1}),s(o,{type:"primary",style:{"margin-left":"10px"},onClick:h},{default:i(()=>[p("重置")]),_:1})])])])]),_:1},8,["model"])]),l("div",$,[s(o,{type:"primary",onClick:w},{default:i(()=>[p("刷新")]),_:1})]),l("div",A,[s(C,{columns:y.value,data:f.value},null,8,["columns","data"])]),s(z,{total:n.value.totalItems,"page-size":n.value.pageSize,"current-page":n.value.currentPage,onPageChange:g},null,8,["total","page-size","current-page"])])}}});const ge=V(J,[["__scopeId","data-v-24f401b5"]]);export{ge as default};
