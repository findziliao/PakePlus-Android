import{o as j,p as A,cV as st,b2 as at,dC as ut,dD as dt,W as x,dE as pt,V as M,k,B as U,E as $,cn as ft,cl as ht,cm as ct,r as F,bZ as S,d as X,A as mt,cW as vt,dF as bt,a4 as Z,dG as P,dH as yt,cA as wt,t as V,s as xt,h as O,cr as Mt,L as $t,y as gt}from"./index.js";import{b as Bt}from"./next-frame-once.js";function Wt(n,t){let{target:e}=n;for(;e;){if(e.dataset&&e.dataset[t]!==void 0)return!0;e=e.parentElement}return!1}let B,z;const kt=()=>{var n,t;B=st?(t=(n=document)===null||n===void 0?void 0:n.fonts)===null||t===void 0?void 0:t.ready:void 0,z=!1,B!==void 0?B.then(()=>{z=!0}):z=!0};kt();function zt(n){if(z)return;let t=!1;j(()=>{z||B==null||B.then(()=>{t||n()})}),A(()=>{t=!0})}function _t(n={},t){const e=at({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:l,keyup:s}=n,p=o=>{switch(o.key){case"Control":e.ctrl=!0;break;case"Meta":e.command=!0,e.win=!0;break;case"Shift":e.shift=!0;break;case"Tab":e.tab=!0;break}l!==void 0&&Object.keys(l).forEach(m=>{if(m!==o.key)return;const c=l[m];if(typeof c=="function")c(o);else{const{stop:b=!1,prevent:r=!1}=c;b&&o.stopPropagation(),r&&o.preventDefault(),c.handler(o)}})},a=o=>{switch(o.key){case"Control":e.ctrl=!1;break;case"Meta":e.command=!1,e.win=!1;break;case"Shift":e.shift=!1;break;case"Tab":e.tab=!1;break}s!==void 0&&Object.keys(s).forEach(m=>{if(m!==o.key)return;const c=s[m];if(typeof c=="function")c(o);else{const{stop:b=!1,prevent:r=!1}=c;b&&o.stopPropagation(),r&&o.preventDefault(),c.handler(o)}})},f=()=>{(t===void 0||t.value)&&(M("keydown",document,p),M("keyup",document,a)),t!==void 0&&k(t,o=>{o?(M("keydown",document,p),M("keyup",document,a)):(x("keydown",document,p),x("keyup",document,a))})};return ut()?(dt(f),A(()=>{(t===void 0||t.value)&&(x("keydown",document,p),x("keyup",document,a))})):f(),pt(e)}const Kt=U("n-internal-select-menu"),At=U("n-internal-select-menu-body"),q="__disabled__";function J(n){const t=$(ft,null),e=$(ht,null),l=$(ct,null),s=$(At,null),p=F();if(typeof document<"u"){p.value=document.fullscreenElement;const a=()=>{p.value=document.fullscreenElement};j(()=>{M("fullscreenchange",document,a)}),A(()=>{x("fullscreenchange",document,a)})}return S(()=>{var a;const{to:f}=n;return f!==void 0?f===!1?q:f===!0?p.value||"body":f:t!=null&&t.value?(a=t.value.$el)!==null&&a!==void 0?a:t.value:e!=null&&e.value?e.value:l!=null&&l.value?l.value:s!=null&&s.value?s.value:f??(p.value||"body")})}J.tdkey=q;J.propTo={type:[String,Object,Boolean],default:void 0};let w=null;function Q(){if(w===null&&(w=document.getElementById("v-binder-view-measurer"),w===null)){w=document.createElement("div"),w.id="v-binder-view-measurer";const{style:n}=w;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(w)}return w.getBoundingClientRect()}function Ct(n,t){const e=Q();return{top:t,left:n,height:0,width:0,right:e.width-n,bottom:e.height-t}}function D(n){const t=n.getBoundingClientRect(),e=Q();return{left:t.left-e.left,top:t.top-e.top,bottom:e.height+e.top-t.bottom,right:e.width+e.left-t.right,width:t.width,height:t.height}}function Et(n){return n.nodeType===9?null:n.parentNode}function R(n){if(n===null)return null;const t=Et(n);if(t===null)return null;if(t.nodeType===9)return document;if(t.nodeType===1){const{overflow:e,overflowX:l,overflowY:s}=getComputedStyle(t);if(/(auto|scroll|overlay)/.test(e+s+l))return t}return R(t)}const Ot=X({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var t;mt("VBinder",(t=vt())===null||t===void 0?void 0:t.proxy);const e=$("VBinder",null),l=F(null),s=i=>{l.value=i,e&&n.syncTargetWithParent&&e.setTargetRef(i)};let p=[];const a=()=>{let i=l.value;for(;i=R(i),i!==null;)p.push(i);for(const y of p)M("scroll",y,b,!0)},f=()=>{for(const i of p)x("scroll",i,b,!0);p=[]},o=new Set,m=i=>{o.size===0&&a(),o.has(i)||o.add(i)},c=i=>{o.has(i)&&o.delete(i),o.size===0&&f()},b=()=>{Bt(r)},r=()=>{o.forEach(i=>i())},u=new Set,h=i=>{u.size===0&&M("resize",window,v),u.has(i)||u.add(i)},d=i=>{u.has(i)&&u.delete(i),u.size===0&&x("resize",window,v)},v=()=>{u.forEach(i=>i())};return A(()=>{x("resize",window,v),f()}),{targetRef:l,setTargetRef:s,addScrollListener:m,removeScrollListener:c,addResizeListener:h,removeResizeListener:d}},render(){return bt("binder",this.$slots)}}),Pt=Ot,Tt=X({name:"Target",setup(){const{setTargetRef:n,syncTarget:t}=$("VBinder");return{syncTarget:t,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:t}=this;return n?Z(P("follower",this.$slots),[[t]]):P("follower",this.$slots)}}),{c:C}=yt(),Ft="vueuc-style",E={top:"bottom",bottom:"top",left:"right",right:"left"},T={start:"end",center:"center",end:"start"},N={top:"height",bottom:"height",left:"width",right:"width"},Xt={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},Yt={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},It={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},H={top:!0,bottom:!1,left:!0,right:!1},G={top:"end",bottom:"start",left:"end",right:"start"};function Vt(n,t,e,l,s,p){if(!s||p)return{placement:n,top:0,left:0};const[a,f]=n.split("-");let o=f??"center",m={top:0,left:0};const c=(u,h,d)=>{let v=0,i=0;const y=e[u]-t[h]-t[u];return y>0&&l&&(d?i=H[h]?y:-y:v=H[h]?y:-y),{left:v,top:i}},b=a==="left"||a==="right";if(o!=="center"){const u=It[n],h=E[u],d=N[u];if(e[d]>t[d]){if(t[u]+t[d]<e[d]){const v=(e[d]-t[d])/2;t[u]<v||t[h]<v?t[u]<t[h]?(o=T[f],m=c(d,h,b)):m=c(d,u,b):o="center"}}else e[d]<t[d]&&t[h]<0&&t[u]>t[h]&&(o=T[f])}else{const u=a==="bottom"||a==="top"?"left":"top",h=E[u],d=N[u],v=(e[d]-t[d])/2;(t[u]<v||t[h]<v)&&(t[u]>t[h]?(o=G[u],m=c(d,u,b)):(o=G[h],m=c(d,h,b)))}let r=a;return t[a]<e[N[a]]&&t[a]<t[E[a]]&&(r=E[a]),{placement:o!=="center"?`${r}-${o}`:r,left:m.left,top:m.top}}function Dt(n,t){return t?Yt[n]:Xt[n]}function Nt(n,t,e,l,s,p){if(p)switch(n){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"top-end":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"left-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height+l)}px`,left:`${Math.round(e.left-t.left+s)}px`,transform:""};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height+l)}px`,left:`${Math.round(e.left-t.left+e.width+s)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top+l)}px`,left:`${Math.round(e.left-t.left+s)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(e.top-t.top+l)}px`,left:`${Math.round(e.left-t.left+e.width+s)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top+l)}px`,left:`${Math.round(e.left-t.left+e.width+s)}px`,transform:""};case"right-end":return{top:`${Math.round(e.top-t.top+e.height+l)}px`,left:`${Math.round(e.left-t.left+e.width+s)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top+l)}px`,left:`${Math.round(e.left-t.left+s)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(e.top-t.top+e.height+l)}px`,left:`${Math.round(e.left-t.left+s)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top+l)}px`,left:`${Math.round(e.left-t.left+e.width/2+s)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2+l)}px`,left:`${Math.round(e.left-t.left+e.width+s)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2+l)}px`,left:`${Math.round(e.left-t.left+s)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height+l)}px`,left:`${Math.round(e.left-t.left+e.width/2+s)}px`,transform:"translateX(-50%)"}}}const St=C([C(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),C(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[C("> *",{pointerEvents:"all"})])]),Ht=X({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const t=$("VBinder"),e=S(()=>n.enabled!==void 0?n.enabled:n.show),l=F(null),s=F(null),p=()=>{const{syncTrigger:r}=n;r.includes("scroll")&&t.addScrollListener(o),r.includes("resize")&&t.addResizeListener(o)},a=()=>{t.removeScrollListener(o),t.removeResizeListener(o)};j(()=>{e.value&&(o(),p())});const f=wt();St.mount({id:"vueuc/binder",head:!0,anchorMetaName:Ft,ssr:f}),A(()=>{a()}),zt(()=>{e.value&&o()});const o=()=>{if(!e.value)return;const r=l.value;if(r===null)return;const u=t.targetRef,{x:h,y:d,overlap:v}=n,i=h!==void 0&&d!==void 0?Ct(h,d):D(u);r.style.setProperty("--v-target-width",`${Math.round(i.width)}px`),r.style.setProperty("--v-target-height",`${Math.round(i.height)}px`);const{width:y,minWidth:Y,placement:L,internalShift:tt,flip:et}=n;r.setAttribute("v-placement",L),v?r.setAttribute("v-overlap",""):r.removeAttribute("v-overlap");const{style:g}=r;y==="target"?g.width=`${i.width}px`:y!==void 0?g.width=y:g.width="",Y==="target"?g.minWidth=`${i.width}px`:Y!==void 0?g.minWidth=Y:g.minWidth="";const nt=D(r),ot=D(s.value),{left:W,top:_,placement:I}=Vt(L,i,nt,tt,et,v),K=Dt(I,v),{left:rt,top:it,transform:lt}=Nt(I,ot,i,_,W,v);r.setAttribute("v-placement",I),r.style.setProperty("--v-offset-left",`${Math.round(W)}px`),r.style.setProperty("--v-offset-top",`${Math.round(_)}px`),r.style.transform=`translateX(${rt}) translateY(${it}) ${lt}`,r.style.setProperty("--v-transform-origin",K),r.style.transformOrigin=K};k(e,r=>{r?(p(),m()):a()});const m=()=>{gt().then(o).catch(r=>console.error(r))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(r=>{k(V(n,r),o)}),["teleportDisabled"].forEach(r=>{k(V(n,r),m)}),k(V(n,"syncTrigger"),r=>{r.includes("resize")?t.addResizeListener(o):t.removeResizeListener(o),r.includes("scroll")?t.addScrollListener(o):t.removeScrollListener(o)});const c=xt(),b=S(()=>{const{to:r}=n;if(r!==void 0)return r;c.value});return{VBinder:t,mergedEnabled:e,offsetContainerRef:s,followerRef:l,mergedTo:b,syncPosition:o}},render(){return O($t,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,t;const e=O("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[O("div",{class:"v-binder-follower-content",ref:"followerRef"},(t=(n=this.$slots).default)===null||t===void 0?void 0:t.call(n))]);return this.zindexable?Z(e,[[Mt,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):e}})}}),Gt=X({props:{onFocus:Function,onBlur:Function},setup(n){return()=>O("div",{style:"width: 0; height: 0",tabindex:0,onFocus:n.onFocus,onBlur:n.onBlur})}});export{Gt as F,Pt as V,Tt as a,Ht as b,Ft as c,C as d,At as e,_t as f,Wt as h,Kt as i,zt as o,J as u};
