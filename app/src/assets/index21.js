import O from"./index19.js";import{d as A,an as v,ao as c,ap as s,r as y,o as S,cd as C,C as M,aw as e,ar as a,as as B,ax as m,aB as x,ce as $,a$ as D,a7 as N,aC as R,aD as P}from"./index.js";import{N as L}from"./Icon.js";import{_ as z,a as V}from"./RadioGroup.js";import{_ as j}from"./Space.js";import{_ as q}from"./FormItem.js";import{_ as F}from"./InputNumber.js";import{_ as G}from"./Form.js";import{_ as H}from"./Spin.js";import{_ as J}from"./_plugin-vue_export-helper.js";import"./DrawerContent.js";import"./use-merged-state.js";import"./format-length.js";import"./get-slot.js";import"./get.js";import"./Input.js";import"./Add.js";import"./use-compitable.js";const K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Q=A({name:"SettingsSharp",render:function(h,g){return v(),c("svg",K,g[0]||(g[0]=[s("path",{d:"M256 176a80 80 0 1 0 80 80a80.24 80.24 0 0 0-80-80zm172.72 80a165.53 165.53 0 0 1-1.64 22.34l48.69 38.12a11.59 11.59 0 0 1 2.63 14.78l-46.06 79.52a11.64 11.64 0 0 1-14.14 4.93l-57.25-23a176.56 176.56 0 0 1-38.82 22.67l-8.56 60.78a11.93 11.93 0 0 1-11.51 9.86h-92.12a12 12 0 0 1-11.51-9.53l-8.56-60.78A169.3 169.3 0 0 1 151.05 393L93.8 416a11.64 11.64 0 0 1-14.14-4.92L33.6 331.57a11.59 11.59 0 0 1 2.63-14.78l48.69-38.12A174.58 174.58 0 0 1 83.28 256a165.53 165.53 0 0 1 1.64-22.34l-48.69-38.12a11.59 11.59 0 0 1-2.63-14.78l46.06-79.52a11.64 11.64 0 0 1 14.14-4.93l57.25 23a176.56 176.56 0 0 1 38.82-22.67l8.56-60.78A11.93 11.93 0 0 1 209.94 26h92.12a12 12 0 0 1 11.51 9.53l8.56 60.78A169.3 169.3 0 0 1 361 119l57.2-23a11.64 11.64 0 0 1 14.14 4.92l46.06 79.52a11.59 11.59 0 0 1-2.63 14.78l-48.69 38.12a174.58 174.58 0 0 1 1.64 22.66z",fill:"currentColor"},null,-1)]))}}),f=p=>(R("data-v-5617ec64"),p=p(),P(),p),X={class:"setting-container"},Y={class:"flex items-center"},Z=f(()=>s("h1",{class:"text-xl font-bold"},"业务设置",-1)),ee={key:0,class:"mb-10"},ae={class:"p-4 rounded border border-gray-300 dark:border-gray-600 inline-block"},ne=f(()=>s("label",{class:"text-gray-600 dark:text-gray-200 mr-20"},"请配置库存预警相关参数：",-1)),te={key:0,class:"mb-10"},le={class:"p-4 rounded border border-gray-300 dark:border-gray-600 inline-block"},oe=f(()=>s("label",{class:"text-gray-600 dark:text-gray-200 mr-20"},"请配置效期预警相关参数：",-1)),se={key:0,class:"mb-10"},re={class:"p-4 rounded border border-gray-300 dark:border-gray-600 inline-block"},ie=f(()=>s("label",{class:"text-gray-600 dark:text-gray-200 mr-20"},"请配置自动申领相关参数：",-1)),ue=f(()=>s("span",{style:{color:"#AAAAAA","font-size":"13px","margin-left":"5px"}}," 0表示不设置长时间取用未消耗提示 ",-1)),de={style:{width:"100%",height:"40px",display:"flex","justify-content":"end"}},pe=A({__name:"index",setup(p){const h=y(),g=y(""),t=y({isShowInventoryResult:!0,onShelfInboundMethod:"hasOrder",outboundMethod:"hasOrder",isEnableTakeUnreturnWarning:!0,isEnableOverprivilegeWarning:!0,isEnableStockWarning:!0,isEnableExpiryWarning:!0,isEnableAutoApplication:!0,setTakeUnconsumedPromptTime:7});async function U(){var r,n;try{const{data:_}=await $(t.value);_&&((r=window.$message)==null||r.success("保存成功"))}catch(_){console.error("保存业务设置失败:",_),(n=window.$message)==null||n.error("保存失败，请重试")}}const k=y(!0);S(async()=>{try{k.value=!0;const r=await C();r.data&&(t.value={...r.data,setTakeUnconsumedPromptTime:r.data.setTakeUnconsumedPromptTime||7})}catch(r){console.error("获取业务设置失败:",r)}finally{k.value=!1}});function w(r){var n;(n=h.value)==null||n.openDrawer(r)}return S(()=>{}),M(()=>{}),(r,n)=>{const _=L,E=D,o=z,u=j,d=V,i=q,b=N,W=F,T=G,I=H;return v(),c("div",X,[e(I,{show:k.value,description:"数据加载中，请稍候..."},{default:a(()=>[e(E,{class:""},{default:a(()=>[s("div",Y,[e(_,{class:"mr-2",size:"20"},{default:a(()=>[e(B(Q))]),_:1}),Z])]),_:1}),e(E,null,{default:a(()=>[e(T,{ref:"formRef",model:t.value,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:a(()=>[e(i,{label:"关门盘点是否显示结果：",path:"isShowInventoryResult"},{default:a(()=>[e(d,{value:t.value.isShowInventoryResult,"onUpdate:value":n[0]||(n[0]=l=>t.value.isShowInventoryResult=l)},{default:a(()=>[e(u,null,{default:a(()=>[e(o,{value:!0,label:"是"}),e(o,{value:!1,label:"否"})]),_:1})]),_:1},8,["value"])]),_:1}),e(i,{label:"上架入库方式：",path:"onShelfInboundMethod"},{default:a(()=>[e(d,{value:t.value.onShelfInboundMethod,"onUpdate:value":n[1]||(n[1]=l=>t.value.onShelfInboundMethod=l)},{default:a(()=>[e(u,null,{default:a(()=>[e(o,{value:"hasOrder",label:"有单入库上架"}),e(o,{value:"noOrder",label:"无单入库上架"})]),_:1})]),_:1},8,["value"])]),_:1}),e(i,{label:"退库方式：",path:"outboundMethod"},{default:a(()=>[e(d,{value:t.value.outboundMethod,"onUpdate:value":n[2]||(n[2]=l=>t.value.outboundMethod=l)},{default:a(()=>[e(u,null,{default:a(()=>[e(o,{value:"hasOrder",label:"有单退库"}),e(o,{value:"noOrder",label:"无单退库"})]),_:1})]),_:1},8,["value"])]),_:1}),e(i,{label:"是否开启取用未归还预警：",path:"isEnableTakeUnreturnWarning"},{default:a(()=>[e(d,{value:t.value.isEnableTakeUnreturnWarning,"onUpdate:value":n[3]||(n[3]=l=>t.value.isEnableTakeUnreturnWarning=l)},{default:a(()=>[e(u,null,{default:a(()=>[e(o,{value:!0,label:"是"}),e(o,{value:!1,label:"否"})]),_:1})]),_:1},8,["value"])]),_:1}),e(i,{style:{margin:"0",padding:"0"},label:"是否开启越权预警：",path:"isEnableOverprivilegeWarning",class:"form-item-spacing"},{default:a(()=>[e(d,{value:t.value.isEnableOverprivilegeWarning,"onUpdate:value":n[4]||(n[4]=l=>t.value.isEnableOverprivilegeWarning=l)},{default:a(()=>[e(u,null,{default:a(()=>[e(o,{value:!0,label:"是"}),e(o,{value:!1,label:"否"})]),_:1})]),_:1},8,["value"])]),_:1}),s("div",null,[e(i,{style:{margin:"0",padding:"0"},label:"是否开启库存预警：",path:"isEnableStockWarning",class:"form-item-spacing"},{default:a(()=>[e(d,{value:t.value.isEnableStockWarning,"onUpdate:value":n[5]||(n[5]=l=>t.value.isEnableStockWarning=l)},{default:a(()=>[e(u,null,{default:a(()=>[e(o,{value:!0,label:"是"}),e(o,{value:!1,label:"否"})]),_:1})]),_:1},8,["value"])]),_:1}),t.value.isEnableStockWarning===!0?(v(),c("div",ee,[s("div",ae,[ne,e(b,{type:"primary",class:"w-48",onClick:n[6]||(n[6]=l=>w("inventorySetting"))},{default:a(()=>[m("耗材库存预警设置")]),_:1})])])):x("",!0)]),s("div",null,[e(i,{style:{margin:"0",padding:"0"},label:"是否开启效期预警：",path:"isEnableExpiryWarning",class:"form-item-spacing"},{default:a(()=>[e(d,{value:t.value.isEnableExpiryWarning,"onUpdate:value":n[7]||(n[7]=l=>t.value.isEnableExpiryWarning=l)},{default:a(()=>[e(u,null,{default:a(()=>[e(o,{value:!0,label:"是"}),e(o,{value:!1,label:"否"})]),_:1})]),_:1},8,["value"])]),_:1}),t.value.isEnableExpiryWarning===!0?(v(),c("div",te,[s("div",le,[oe,e(b,{type:"primary",class:"w-48",onClick:n[8]||(n[8]=l=>w("expirySetting"))},{default:a(()=>[m("耗材效期预警设置")]),_:1})])])):x("",!0)]),s("div",null,[e(i,{style:{margin:"0",padding:"0"},label:"是否开启自动申领：",path:"isEnableAutoApplication",class:"form-item-spacing"},{default:a(()=>[e(d,{value:t.value.isEnableAutoApplication,"onUpdate:value":n[9]||(n[9]=l=>t.value.isEnableAutoApplication=l)},{default:a(()=>[e(u,null,{default:a(()=>[e(o,{value:!0,label:"是"}),e(o,{value:!1,label:"否"})]),_:1})]),_:1},8,["value"])]),_:1}),t.value.isEnableAutoApplication===!0?(v(),c("div",se,[s("div",re,[ie,e(b,{type:"primary",class:"w-48",onClick:n[10]||(n[10]=l=>w("autoApplySetting"))},{default:a(()=>[m("自动申领方案和周期设置")]),_:1})])])):x("",!0)]),e(i,{label:"设置取用未消耗提示时间（天）：",path:"setTakeUnconsumedPromptTime"},{default:a(()=>[e(W,{value:t.value.setTakeUnconsumedPromptTime,"onUpdate:value":n[11]||(n[11]=l=>t.value.setTakeUnconsumedPromptTime=l),min:"0",class:"w-full max-w-[180px]"},{suffix:a(()=>[m(" 天 ")]),_:1},8,["value"]),ue]),_:1}),s("div",de,[e(b,{type:"primary",class:"w-48",onClick:U},{default:a(()=>[m(" 保存 ")]),_:1})])]),_:1},8,["model"])]),_:1}),e(O,{ref_key:"settingDrawerRef",ref:h,"active-component":g.value},null,8,["active-component"])]),_:1},8,["show"])])}}});const Ie=J(pe,[["__scopeId","data-v-5617ec64"]]);export{Ie as default};
