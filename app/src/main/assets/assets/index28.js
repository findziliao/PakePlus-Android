import{T as S}from"./table-paginate.js";import{d as U,r as c,o as I,an as P,ao as Y,ap as a,aw as o,ar as p,ax as y,az as T,bK as N,h as R,a7 as M,aC as B,aD as F}from"./index.js";import{p as V}from"./table-paginate2.js";import{f as j}from"./inventory.js";import{_ as q}from"./Input.js";import{a as E}from"./Dropdown.js";import{_ as L}from"./Form.js";import{N as O}from"./DataTable.js";import{_ as K}from"./_plugin-vue_export-helper.js";import"./use-merged-state.js";import"./use-compitable.js";import"./FocusDetector.js";import"./next-frame-once.js";import"./get.js";import"./format-length.js";import"./Icon.js";import"./ChevronRight.js";import"./Checkbox.js";import"./RadioGroup.js";import"./get-slot.js";const i=d=>(B("data-v-6389e963"),d=d(),F(),d),Q={class:"query-area"},$={class:"grid grid-cols-6 gap-6"},A={class:"flex items-center"},G=i(()=>a("label",{class:"mr-2",style:{width:"5.1rem"}},"耗材子编码",-1)),H={class:"flex items-center"},J=i(()=>a("label",{class:"mr-2",style:{width:"5rem"}},"耗材名称",-1)),W={class:"flex items-center"},X=i(()=>a("label",{class:"mr-2",style:{width:"5rem"}},"唯一码",-1)),Z={class:"flex items-center"},ee=i(()=>a("label",{class:"mr-2",style:{width:"9.2rem"}},"失效日期范围",-1)),te={class:"flex items-center"},ae=i(()=>a("label",{class:"mr-2",style:{width:"5rem"}},"规格型号",-1)),le={class:"flex items-center"},se=i(()=>a("label",{class:"mr-2",style:{width:"5rem"}},"生产厂家",-1)),oe={class:"flex items-center"},ne=i(()=>a("label",{class:"mr-2",style:{width:"5rem"}},"批号",-1)),re={class:"flex items-center"},ie=i(()=>a("label",{class:"mr-2",style:{width:"5rem"}},"品牌",-1)),de={class:"flex items-center"},ue=i(()=>a("label",{class:"mr-2",style:{width:"5rem"}},"耗材状态",-1)),ce={class:"flex justify-end mt-18"},pe=U({__name:"index",setup(d){const h=[{label:"正常",value:"normal"},{label:"效期预警",value:"nearExpiry"},{label:"spd系统已停用",value:"stop"}],g=[{label:"30天",value:30},{label:"60天",value:60},{label:"90天",value:90},{label:"180天",value:180}],f=l=>{if(l!=="custom"){const e=N(),r=l?e.subtract(parseInt(l),"day"):e;console.log("选择的日期范围：",r.format("YYYY-MM-DD"),e.format("YYYY-MM-DD"))}},n=c({totalItems:100,pageSize:V,currentPage:1}),t=c({code:"",name:"",spec:"",manufacturer:"",batch:"",brand:"",rfid:"",type:null,expiryDateRange:null,page:n.value.currentPage,pagesize:n.value.pageSize,searchType:"rfid"}),b=l=>{n.value.currentPage=l,t.value.page=l,t.value.pagesize=n.value.pageSize,u()},x=[{title:"序号",key:"index",render:(l,e)=>e+1},{title:"货柜名称",key:"cabinet.name",render:l=>{var e;return((e=l.cabinet)==null?void 0:e.name)||"-"}},{title:"耗材子编码",key:"code"},{title:"耗材名称",key:"name"},{title:"唯一码",key:"rfid"},{title:"规格型号",key:"spec"},{title:"生产厂家",key:"manufacturer"},{title:"品牌",key:"brand"},{title:"批号",key:"batch"},{title:"生产日期",key:"productionDate"},{title:"失效日期",key:"expiryDate"},{title:"耗材状态",key:"type",render:l=>{let e="display: inline-block; padding: 4px 8px; color: white;";switch(l.type){case"spd系统停用":e+="background-color: red;";break;case"效期预警":e+="background-color: #FFCC00;";break;case"正常":e+="background-color: green;";break}return R("div",{style:e},l.type)}}],u=async()=>{try{const l=await j(t.value);n.value.totalItems=l.data.total,m.value=l.data.items}catch(l){console.error("获取库存列表失败:",l)}},k=l=>{console.log("选择的耗材状态：",l)},w=()=>{t.value={code:"",name:"",spec:"",manufacturer:"",batch:"",brand:"",rfid:"",expiryDateRange:null,type:null,page:1,pagesize:n.value.pageSize,searchType:"rfid"},n.value.currentPage=1,u()},m=c([]);return I(()=>{u()}),(l,e)=>{const r=q,v=E,_=M,D=L,z=O,C=S;return P(),Y(T,null,[a("div",null,[a("div",Q,[o(D,{model:t.value,"label-width":100,"label-placement":"left",inline:""},{default:p(()=>[a("div",$,[a("div",A,[G,o(r,{value:t.value.code,"onUpdate:value":e[0]||(e[0]=s=>t.value.code=s),placeholder:"请输入耗材子编码",style:{width:"180px"}},null,8,["value"])]),a("div",H,[J,o(r,{value:t.value.name,"onUpdate:value":e[1]||(e[1]=s=>t.value.name=s),placeholder:"请输入耗材名称",style:{width:"180px"}},null,8,["value"])]),a("div",W,[X,o(r,{value:t.value.rfid,"onUpdate:value":e[2]||(e[2]=s=>t.value.rfid=s),placeholder:"请输入唯一码",style:{width:"180px"}},null,8,["value"])]),a("div",Z,[ee,o(v,{value:t.value.expiryDateRange,"onUpdate:value":[e[3]||(e[3]=s=>t.value.expiryDateRange=s),f],options:g,placeholder:"请选择日期范围",style:{width:"245px"}},null,8,["value"])]),a("div",te,[ae,o(r,{value:t.value.spec,"onUpdate:value":e[4]||(e[4]=s=>t.value.spec=s),placeholder:"请输入规格型号",style:{width:"180px"}},null,8,["value"])]),a("div",le,[se,o(r,{value:t.value.manufacturer,"onUpdate:value":e[5]||(e[5]=s=>t.value.manufacturer=s),placeholder:"请输入生产厂家",style:{width:"180px"}},null,8,["value"])]),a("div",oe,[ne,o(r,{value:t.value.batch,"onUpdate:value":e[6]||(e[6]=s=>t.value.batch=s),placeholder:"请输入批号",style:{width:"180px"}},null,8,["value"])]),a("div",re,[ie,o(r,{value:t.value.brand,"onUpdate:value":e[7]||(e[7]=s=>t.value.brand=s),placeholder:"请输入品牌",style:{width:"180px"}},null,8,["value"])]),a("div",de,[ue,o(v,{value:t.value.type,"onUpdate:value":[e[8]||(e[8]=s=>t.value.type=s),k],options:h,placeholder:"请选择耗材状态",style:{width:"180px"}},null,8,["value"])])]),a("div",ce,[o(_,{type:"primary",onClick:u},{default:p(()=>[y("查询")]),_:1}),o(_,{type:"primary",style:{"margin-left":"10px"},onClick:w},{default:p(()=>[y("重置")]),_:1})])]),_:1},8,["model"])]),o(z,{columns:x,data:m.value,"row-key":s=>s.id},null,8,["data","row-key"])]),o(C,{total:n.value.totalItems,"page-size":n.value.pageSize,"current-page":n.value.currentPage,onPageChange:b},null,8,["total","page-size","current-page"])],64)}}});const Ne=K(pe,[["__scopeId","data-v-6389e963"]]);export{Ne as default};
