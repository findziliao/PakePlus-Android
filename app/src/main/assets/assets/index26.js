import{T as S}from"./table-paginate.js";import{d as I,r as u,o as P,an as U,ao as Y,ap as l,aw as n,ar as d,ax as y,az as T,bK as N,h as R,a7 as B,aC as M,aD as F}from"./index.js";import{p as V}from"./table-paginate2.js";import{f as j}from"./inventory.js";import{_ as E}from"./Input.js";import{a as L}from"./Dropdown.js";import{_ as O}from"./Form.js";import{N as q}from"./DataTable.js";import{_ as K}from"./_plugin-vue_export-helper.js";import"./use-merged-state.js";import"./use-compitable.js";import"./FocusDetector.js";import"./next-frame-once.js";import"./get.js";import"./format-length.js";import"./Icon.js";import"./ChevronRight.js";import"./Checkbox.js";import"./RadioGroup.js";import"./get-slot.js";const i=c=>(M("data-v-e62fcecd"),c=c(),F(),c),Q={class:"query-area"},$={class:"grid grid-cols-6 gap-6"},A={class:"flex items-center"},G=i(()=>l("label",{class:"mr-2",style:{width:"5rem"}},"耗材子编码",-1)),H={class:"flex items-center"},J=i(()=>l("label",{class:"mr-2",style:{width:"5rem"}},"耗材名称",-1)),W={class:"flex items-center"},X=i(()=>l("label",{class:"mr-2",style:{width:"9rem"}},"失效日期范围",-1)),Z={class:"flex items-center"},ee=i(()=>l("label",{class:"mr-2",style:{width:"5rem"}},"规格型号",-1)),te={class:"flex items-center"},ae=i(()=>l("label",{class:"mr-2",style:{width:"5rem"}},"生产厂家",-1)),le={class:"flex items-center"},se=i(()=>l("label",{class:"mr-2",style:{width:"2.5rem"}},"批号",-1)),ne={class:"flex items-center"},oe=i(()=>l("label",{class:"mr-2",style:{width:"5rem"}},"品牌",-1)),re={class:"flex items-center"},ie=i(()=>l("label",{class:"mr-2",style:{width:"5rem"}},"耗材状态",-1)),ce={class:"flex justify-end mt-18"},pe=I({__name:"index",setup(c){const h=[{label:"正常",value:"normal"},{label:"效期预警",value:"nearExpiry"},{label:"spd系统已停用",value:"stop"}],g=[{label:"30天",value:30},{label:"60天",value:60},{label:"90天",value:90},{label:"180天",value:180}],b=t=>{if(t!=="custom"){const e=N(),r=t?e.subtract(parseInt(t),"day"):e;console.log("选择的日期范围：",r.format("YYYY-MM-DD"),e.format("YYYY-MM-DD"))}},o=u({totalItems:100,pageSize:V,currentPage:1}),a=u({code:"",name:"",spec:"",manufacturer:"",batch:"",brand:"",type:null,expiryDateRange:null,page:o.value.currentPage,pagesize:o.value.pageSize,searchType:"batch"}),f=t=>{o.value.currentPage=t,a.value.page=t,a.value.pagesize=o.value.pageSize,p()},x=[{title:"序号",key:"index",render:(t,e)=>e+1},{title:"货柜名称",key:"cabinet.name",render:t=>{var e;return((e=t.cabinet)==null?void 0:e.name)||"-"}},{title:"耗材子编码",key:"code"},{title:"耗材名称",key:"name"},{title:"规格型号",key:"spec"},{title:"生产厂家",key:"manufacturer"},{title:"品牌",key:"brand"},{title:"批号",key:"batch"},{title:"生产日期",key:"productionDate"},{title:"失效日期",key:"expiryDate"},{title:"数量",key:"number"},{title:"耗材状态",key:"type",render:t=>{if(!t||!t.type)return null;let e="display: inline-block; padding: 4px 8px; color: white;";switch(t.type){case"spd系统停用":e+="background-color: red;";break;case"效期预警":e+="background-color: #FFCC00;";break;case"正常":e+="background-color: green;";break}return R("div",{style:e},t.type)}}],p=async()=>{try{const t=await j(a.value);o.value.totalItems=t.data.total,m.value=t.data.items}catch(t){console.error("获取库存列表失败:",t)}},k=t=>{console.log("选择的耗材状态：",t)},w=()=>{a.value={code:"",name:"",spec:"",manufacturer:"",batch:"",brand:"",expiryDateRange:null,type:null,page:1,pagesize:o.value.pageSize,searchType:"batch"},o.value.currentPage=1,p()},m=u([]);return P(()=>{p()}),(t,e)=>{const r=E,v=L,_=B,D=O,z=q,C=S;return U(),Y(T,null,[l("div",null,[l("div",Q,[n(D,{model:a.value,"label-width":100,"label-placement":"left",inline:""},{default:d(()=>[l("div",$,[l("div",A,[G,n(r,{value:a.value.code,"onUpdate:value":e[0]||(e[0]=s=>a.value.code=s),placeholder:"请输入耗材子编码",style:{width:"180px"}},null,8,["value"])]),l("div",H,[J,n(r,{value:a.value.name,"onUpdate:value":e[1]||(e[1]=s=>a.value.name=s),placeholder:"请输入耗材名称",style:{width:"180px"}},null,8,["value"])]),l("div",W,[X,n(v,{value:a.value.expiryDateRange,"onUpdate:value":[e[2]||(e[2]=s=>a.value.expiryDateRange=s),b],options:g,placeholder:"请选择日期范围",style:{width:"245px"}},null,8,["value"])]),l("div",Z,[ee,n(r,{value:a.value.spec,"onUpdate:value":e[3]||(e[3]=s=>a.value.spec=s),placeholder:"请输入规格型号",style:{width:"180px"}},null,8,["value"])]),l("div",te,[ae,n(r,{value:a.value.manufacturer,"onUpdate:value":e[4]||(e[4]=s=>a.value.manufacturer=s),placeholder:"请输入生产厂家",style:{width:"180px"}},null,8,["value"])]),l("div",le,[se,n(r,{value:a.value.batch,"onUpdate:value":e[5]||(e[5]=s=>a.value.batch=s),placeholder:"请输入批号",style:{width:"180px"}},null,8,["value"])]),l("div",ne,[oe,n(r,{value:a.value.brand,"onUpdate:value":e[6]||(e[6]=s=>a.value.brand=s),placeholder:"请输入品牌",style:{width:"180px"}},null,8,["value"])]),l("div",re,[ie,n(v,{value:a.value.type,"onUpdate:value":[e[7]||(e[7]=s=>a.value.type=s),k],options:h,placeholder:"请选择耗材状态",style:{width:"180px"}},null,8,["value"])])]),l("div",ce,[n(_,{type:"primary",onClick:p},{default:d(()=>[y("查询")]),_:1}),n(_,{type:"primary",style:{"margin-left":"10px"},onClick:w},{default:d(()=>[y("重置")]),_:1})])]),_:1},8,["model"])]),n(z,{columns:x,data:m.value,"row-key":s=>s.id},null,8,["data","row-key"])]),n(C,{total:o.value.totalItems,"page-size":o.value.pageSize,"current-page":o.value.currentPage,onPageChange:f},null,8,["total","page-size","current-page"])],64)}}});const Ye=K(pe,[["__scopeId","data-v-e62fcecd"]]);export{Ye as default};
