import{T}from"./table-paginate.js";import{d as Y,r as u,o as U,an as B,ao as N,ap as l,aw as n,ar as v,ax as h,az as M,bK as V,h as j,y as A,a7 as E,aC as L,aD as O}from"./index.js";import{p as q}from"./table-paginate2.js";import{f as H}from"./inventory.js";import{_ as K}from"./Input.js";import{a as Q}from"./Dropdown.js";import{_ as $}from"./Form.js";import{N as G}from"./DataTable.js";import{_ as J}from"./_plugin-vue_export-helper.js";import"./use-merged-state.js";import"./use-compitable.js";import"./FocusDetector.js";import"./next-frame-once.js";import"./get.js";import"./format-length.js";import"./Icon.js";import"./ChevronRight.js";import"./Checkbox.js";import"./RadioGroup.js";import"./get-slot.js";const i=p=>(L("data-v-38d89b2f"),p=p(),O(),p),W={class:"query-area"},X={class:"grid grid-cols-6 gap-6"},Z={class:"flex items-center"},ee=i(()=>l("label",{class:"mr-2",style:{width:"5rem"}},"耗材子编码",-1)),te={class:"flex items-center"},ae=i(()=>l("label",{class:"mr-2",style:{width:"5rem"}},"耗材名称",-1)),le={class:"flex items-center"},se=i(()=>l("label",{class:"mr-2",style:{width:"9rem"}},"失效日期范围",-1)),ne={class:"flex items-center"},oe=i(()=>l("label",{class:"mr-2",style:{width:"5rem"}},"规格型号",-1)),re={class:"flex items-center"},ie=i(()=>l("label",{class:"mr-2",style:{width:"5rem"}},"生产厂家",-1)),ue={class:"flex items-center"},ce=i(()=>l("label",{class:"mr-2",style:{width:"2.5rem"}},"品牌",-1)),pe={class:"flex items-center"},de=i(()=>l("label",{class:"mr-2",style:{width:"5rem"}},"耗材状态",-1)),me={class:"flex justify-end mt-18"},ve=Y({__name:"index",setup(p){const d=u(),_=u(!0),c=u(!1),b=[{label:"正常",value:"normal"},{label:"效期预警",value:"nearExpiry"},{label:"spd系统已停用",value:"stop"}],x=[{label:"30天",value:30},{label:"60天",value:60},{label:"90天",value:90},{label:"180天",value:180}],k=t=>{if(t!=="custom"){const e=V(),r=t?e.subtract(parseInt(t),"day"):e;console.log("选择的日期范围：",r.format("YYYY-MM-DD"),e.format("YYYY-MM-DD"))}},o=u({totalItems:100,pageSize:q,currentPage:1}),a=u({code:"",name:"",spec:"",manufacturer:"",brand:"",type:null,expiryDateRange:null,page:o.value.currentPage,pagesize:o.value.pageSize,searchType:"code"}),w=t=>{o.value.currentPage=t,a.value.page=t,a.value.pagesize=o.value.pageSize,m()},D=[{title:"序号",key:"index",render:(t,e)=>e+1},{title:"货柜名称",key:"cabinet.name",render:t=>{var e;return((e=t.cabinet)==null?void 0:e.name)||"-"}},{title:"耗材子编码",key:"code"},{title:"耗材名称",key:"name"},{title:"规格型号",key:"spec"},{title:"生产厂家",key:"manufacturer"},{title:"品牌",key:"brand"},{title:"数量",key:"number"},{title:"耗材状态",key:"type",render:t=>{let e="display: inline-block; padding: 4px 8px; color: white;";switch(t.type){case"spd系统停用":e+="background-color: red;";break;case"效期预警":e+="background-color: #FFCC00;";break;case"正常":e+="background-color: green;";break}return j("div",{style:e},t.type)}}],m=async()=>{try{const t=await H(a.value);o.value.totalItems=t.data.total,y.value=t.data.items}catch(t){console.error("获取库存列表失败:",t)}},I=t=>{console.log("选择的耗材状态：",t)},z=()=>{a.value={code:"",name:"",spec:"",manufacturer:"",brand:"",searchType:"code",type:null,expiryDateRange:null,page:1,pagesize:o.value.pageSize},o.value.currentPage=1,m()},y=u([]),C=()=>{_.value&&!c.value&&(c.value=!0,A(()=>{d.value&&d.value.blur&&d.value.blur(),_.value=!1,c.value=!1}))},S=()=>{c.value&&(c.value=!1)};return U(()=>{m()}),(t,e)=>{const r=K,f=Q,g=E,F=$,P=G,R=T;return B(),N(M,null,[l("div",null,[l("div",W,[n(F,{model:a.value,"label-width":100,"label-placement":"left",inline:""},{default:v(()=>[l("div",X,[l("div",Z,[ee,n(r,{ref_key:"firstInputRef",ref:d,value:a.value.code,"onUpdate:value":e[0]||(e[0]=s=>a.value.code=s),placeholder:"请输入耗材子编码",style:{width:"180px"},onFocus:C,onBlur:S},null,8,["value"])]),l("div",te,[ae,n(r,{value:a.value.name,"onUpdate:value":e[1]||(e[1]=s=>a.value.name=s),placeholder:"请输入耗材名称",style:{width:"180px"}},null,8,["value"])]),l("div",le,[se,n(f,{value:a.value.expiryDateRange,"onUpdate:value":[e[2]||(e[2]=s=>a.value.expiryDateRange=s),k],options:x,placeholder:"请选择日期范围",style:{width:"245px"}},null,8,["value"])]),l("div",ne,[oe,n(r,{value:a.value.spec,"onUpdate:value":e[3]||(e[3]=s=>a.value.spec=s),placeholder:"请输入规格型号",style:{width:"180px"}},null,8,["value"])]),l("div",re,[ie,n(r,{value:a.value.manufacturer,"onUpdate:value":e[4]||(e[4]=s=>a.value.manufacturer=s),placeholder:"请输入生产厂家",style:{width:"180px"}},null,8,["value"])]),l("div",ue,[ce,n(r,{value:a.value.brand,"onUpdate:value":e[5]||(e[5]=s=>a.value.brand=s),placeholder:"请输入品牌",style:{width:"180px"}},null,8,["value"])]),l("div",pe,[de,n(f,{value:a.value.type,"onUpdate:value":[e[6]||(e[6]=s=>a.value.type=s),I],options:b,placeholder:"请选择耗材状态",style:{width:"180px"}},null,8,["value"])])]),l("div",me,[n(g,{type:"primary",onClick:m},{default:v(()=>[h("查询")]),_:1}),n(g,{type:"primary",style:{"margin-left":"10px"},onClick:z},{default:v(()=>[h("重置")]),_:1})])]),_:1},8,["model"])]),n(P,{columns:D,data:y.value,"row-key":s=>s.id},null,8,["data","row-key"])]),n(R,{total:o.value.totalItems,"page-size":o.value.pageSize,"current-page":o.value.currentPage,onPageChange:w},null,8,["total","page-size","current-page"])],64)}}});const Be=J(ve,[["__scopeId","data-v-38d89b2f"]]);export{Be as default};
