import{b as D}from"./record.js";import{d as C,r as c,aJ as S,an as B,ao as I,ap as p,aw as t,ar as l,ax as n,au as s,a7 as E,aC as V,aD as j}from"./index.js";import{_ as O}from"./Input.js";import{_ as T}from"./Form.js";import{_ as H,a as R}from"./DescriptionsItem.js";import{N as U}from"./DataTable.js";import{_ as q}from"./_plugin-vue_export-helper.js";import"./use-merged-state.js";import"./use-compitable.js";import"./get-slot.js";import"./format-length.js";import"./Checkbox.js";import"./RadioGroup.js";import"./Dropdown.js";import"./FocusDetector.js";import"./next-frame-once.js";import"./get.js";import"./Icon.js";import"./ChevronRight.js";const J=d=>(V("data-v-d6cb2b08"),d=d(),j(),d),K={class:"query-area"},L={class:"flex items-center"},M=J(()=>p("label",{class:"mr-2",style:{width:"4rem"}},"唯一码",-1)),P={class:"mt-4"},$=C({__name:"index",setup(d){const i=c({rfid:""}),b=c([{title:"序号",key:"index",render:(a,o)=>o+1},{title:"操作时间",key:"date"},{title:"操作人",key:"userName"},{title:"操作类型",key:"type",render:a=>{const o={take:"取用",return:"归还",inbound:"入库",outbound:"出库",pending:"待上架入库"},_=a.type;return o[_]||a.type}},{title:"操作货柜",key:"cabinetName"},{title:"操作记录单据编号",key:"orderNo"}]),u=c([]),e=c({batch:"",brand:"",code:"",manufacturer:"",name:"",rfid:"",spec:"",unit:""}),y=async()=>{try{const a=await D({rfid:i.value.rfid});if(a.error){u.value=[],Object.keys(e.value).forEach(o=>{e.value[o]=""});return}a.data&&(e.value.batch=a.data.batch||"",e.value.brand=a.data.brand||"",e.value.code=a.data.code||"",e.value.manufacturer=a.data.manufacturer||"",e.value.name=a.data.name||"",e.value.rfid=a.data.rfid||"",e.value.spec=a.data.spec||"",e.value.unit=a.data.unit||""),console.log("接口返回 items:",a.data.items),u.value=a.data.items}catch(a){console.error("获取唯一码记录列表失败:",a),u.value=[],Object.keys(e.value).forEach(o=>{e.value[o]=""})}},h=()=>{i.value={rfid:""},Object.keys(e.value).forEach(a=>{e.value[a]=""}),u.value=[]},f=c(!1),k=c({});return(a,o)=>{const _=O,v=E,x=T,r=H,g=R,w=U,N=S("HandleDialog");return B(),I("div",null,[p("div",K,[t(x,{model:i.value,"label-width":100,"label-placement":"left",inline:""},{default:l(()=>[p("div",L,[M,t(_,{value:i.value.rfid,"onUpdate:value":o[0]||(o[0]=m=>i.value.rfid=m),placeholder:"请输入",style:{width:"180px"}},null,8,["value"]),t(v,{type:"primary",onClick:y,class:"ml-4"},{default:l(()=>[n("查询")]),_:1}),t(v,{type:"primary",style:{"margin-left":"10px"},onClick:h},{default:l(()=>[n("重置")]),_:1})])]),_:1},8,["model"])]),t(g,{column:4,"label-placement":"top"},{default:l(()=>[t(r,{label:"耗材子编码"},{default:l(()=>[n(s(e.value.code),1)]),_:1}),t(r,{label:"耗材名称"},{default:l(()=>[n(s(e.value.name),1)]),_:1}),t(r,{label:"规格型号"},{default:l(()=>[n(s(e.value.spec),1)]),_:1}),t(r,{label:"生产厂家"},{default:l(()=>[n(s(e.value.manufacturer),1)]),_:1}),t(r,{label:"品牌"},{default:l(()=>[n(s(e.value.brand),1)]),_:1}),t(r,{label:"单位"},{default:l(()=>[n(s(e.value.unit),1)]),_:1}),t(r,{label:"唯一码"},{default:l(()=>[n(s(e.value.rfid),1)]),_:1}),t(r,{label:"批号"},{default:l(()=>[n(s(e.value.batch),1)]),_:1})]),_:1}),p("div",P,[t(w,{columns:b.value,data:u.value},null,8,["columns","data"])]),t(N,{visible:f.value,"onUpdate:visible":o[1]||(o[1]=m=>f.value=m),rowData:k.value},null,8,["visible","rowData"])])}}});const ue=q($,[["__scopeId","data-v-d6cb2b08"]]);export{ue as default};
